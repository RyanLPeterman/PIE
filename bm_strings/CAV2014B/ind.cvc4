(set-option :produce-models true)
(set-option :strings-fmf true)

(set-logic QF_S)

(declare-const r String)
(declare-const i Int)

;; Invariant :: (= i (str.len r))

(define-fun ind_check () Bool
            (=> (and (= i (str.len r)) (>= (str.indexof r "aa" 0) 0))
                (= i (str.len (str.++ (str.replace r "aa" ")") "a")))))

(assert (not ind_check))
(check-sat)

(get-value (r i))
